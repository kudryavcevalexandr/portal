<!doctype html>
<html lang="ru">
<head>
  <script>
    (function() {
      if (localStorage.getItem("portal-theme") === "dark") {
        document.documentElement.classList.add("dark-theme");
      }
    })();
  </script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pairs — правка name_tep_korr</title>

  <link rel="stylesheet" href="/assets/css/base.css">
  <link rel="stylesheet" href="/assets/css/layout.css">
  <link rel="stylesheet" href="/assets/css/table.css">

  <style>
    .sticky-top{
      position: sticky;
      top: 0;
      z-index: 10;
      background: var(--panel, #121212);
      border-bottom: 1px solid var(--line, #2a2a2a);
      padding: 12px;
    }
    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .row input[type="text"]{
      flex: 1 1 420px;
      min-width: 240px;
    }
    .muted{ color: var(--muted, #9aa0a6); font-size: 12px; }
    .badge{
      display:inline-block; padding:2px 8px; border-radius:999px;
      border:1px solid var(--line, #2a2a2a);
      color: var(--muted, #9aa0a6); font-size:12px;
    }
    table td input.cell{
      width:100%;
      padding:10px 10px;
      border-radius:10px;
      border:1px solid var(--line, #2a2a2a);
      background: rgba(255,255,255,0.02);
      color: inherit;
      outline: none;
    }
    table td input.cell:focus{
      border-color: rgba(255,255,255,0.25);
    }
    tr.dirty td{ background: rgba(255,255,255,0.02); }
    tr.saving td{ opacity: 0.65; }
    tr.ok td{ outline: 1px solid rgba(0,255,0,0.18); }
    tr.err td{ outline: 1px solid rgba(255,0,0,0.25); }
    .right{ margin-left:auto; display:flex; gap:10px; align-items:center; }
  </style>
</head>

<body>
  <div class="sticky-top">
    <div class="row">
      <div style="font-weight:700;">Pairs (v_nomencklature_spec_pairs_v1)</div>
      <span class="badge">правим: name_tep_korr → зеркально name_tek(≤150)</span>
      <div class="right">
        <button class="btn" type="button" data-theme-toggle aria-pressed="false">Темная тема</button>
        <button id="btnReload" class="btn">Обновить</button>
      </div>
    </div>

    <div class="row" style="margin-top:10px;">
      <input id="q" type="text" placeholder="Поиск (OpenSearch): например 'клапан DN50' или 'ABB'..." />
      <button id="btnSearch" class="btn">Найти</button>
      <select id="size">
        <option value="50">50</option>
        <option value="100" selected>100</option>
        <option value="200">200</option>
        <option value="500">500</option>
      </select>
      <span id="status" class="muted"></span>
    </div>
    <div class="muted" style="margin-top:6px;">
      Enter — сохранить строку. Esc — откатить поле в строке.
    </div>
  </div>

  <div class="panel" style="margin:14px; padding:14px;">
    <table class="table" style="width:100%;">
      <thead>
        <tr>
          <th style="width:90px;">id</th>
          <th>name_tek (только просмотр)</th>
          <th style="width:44%;">name_tep_korr (редактирование)</th>
          <th style="width:170px;">действия</th>
        </tr>
      </thead>
      <tbody id="tb"></tbody>
    </table>
  </div>

  <script src="/assets/js/ui.js"></script>
  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/api.js"></script>
  <script src="/assets/js/page-pairs-edit.js"></script>
</body>
</html>
